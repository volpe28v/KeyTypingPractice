<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>タイピングマスター</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="main-container">
        <div class="game-container">
            <div class="level-display">レッスン: <span id="level">1</span> - <span id="level-desc">人差し指のみ</span></div>
            
            <div class="typing-area">
                <button id="back-to-title-btn" class="back-to-title-btn">タイトルに戻る</button>
                <div class="word-display" id="word-display"></div>
                <button id="replay-audio-btn" class="replay-audio-btn" onclick="replayCurrentWord()" title="発音を再生">🔊</button>
                <div class="meaning" id="meaning"></div>
                <div class="timer-display" id="timer-display">00.00</div>
                <div class="input-area">
                    <input type="text" id="word-input" autocomplete="off" placeholder="ここにタイプしてね" 
                           inputmode="none" style="ime-mode: disabled;" lang="en">
                </div>
                <div class="feedback" id="feedback"></div>
                <div class="progress">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>
            
            <!-- レッスンモード選択画面 -->
            <div class="lesson-mode-selection" id="lesson-mode-selection" style="display: none;">
                <div class="lesson-title-section">
                    <h2 id="selected-lesson-name">レッスン名</h2>
                    <input type="text" id="lesson-name-edit-input" class="lesson-name-edit-input" style="display: none;" />
                </div>
                
                <div class="lesson-words-edit">
                    <h3>単語リスト <span class="edit-toggle" onclick="toggleWordsEdit()">[編集]</span></h3>
                    <div id="words-display" class="words-display"></div>
                    <textarea id="words-edit-area" class="words-edit-area" style="display: none;" placeholder="単語, 意味の形式で入力してください"></textarea>
                    <div id="words-edit-controls" class="words-edit-controls btn-group" style="display: none;">
                        <button class="btn btn-primary save-words-btn" onclick="saveWordsEdit()">保存</button>
                        <button class="btn btn-secondary cancel-words-edit-btn" onclick="cancelWordsEdit()">キャンセル</button>
                    </div>
                </div>
                
                <div class="mode-selection">
                    <h3>学習モード</h3>
                    <div class="mode-option">
                        <input type="radio" id="lesson-mode-progressive" name="saved-lesson-mode" value="progressive" checked>
                        <label for="lesson-mode-progressive">段階的練習（スペル全表示→徐々に隠す→全隠し）</label>
                    </div>
                    <div class="mode-option">
                        <input type="radio" id="lesson-mode-pronunciation-meaning" name="saved-lesson-mode" value="pronunciation-meaning">
                        <label for="lesson-mode-pronunciation-meaning">発音 + 意味を表示してスペルを入力</label>
                    </div>
                    <div class="mode-option">
                        <input type="radio" id="lesson-mode-pronunciation-only" name="saved-lesson-mode" value="pronunciation-only">
                        <label for="lesson-mode-pronunciation-only">発音のみを表示してスペルを入力</label>
                    </div>
                </div>
                
                <div class="lesson-mode-buttons btn-group">
                    <button class="btn btn-primary start-lesson-btn" onclick="startSelectedLesson()">スタート</button>
                    <button class="btn btn-danger delete-lesson-btn" onclick="deleteSelectedLesson()">削除</button>
                    <button class="btn btn-secondary cancel-lesson-btn" onclick="cancelLessonMode()">キャンセル</button>
                </div>
            </div>

            <!-- カスタムレッスン設定画面 -->
            <div class="custom-lesson-setup" id="custom-lesson-setup">
                <h2>カスタムレッスン設定</h2>
                
                <div class="lesson-name-input">
                    <label for="lesson-name-input">レッスン名（任意）:</label>
                    <input type="text" id="lesson-name-input" placeholder="例: 基本単語、フルーツ名など">
                </div>
                
                <textarea id="custom-words-input" placeholder="単語と意味を入力してください&#10;形式: 単語, 意味&#10;例:&#10;apple, りんご&#10;banana, バナナ&#10;orange, オレンジ&#10;&#10;※レッスンとして保存されます"></textarea>
                
                <div class="mode-selection">
                    <h3>学習モード</h3>
                    <div class="mode-option">
                        <input type="radio" id="mode-progressive" name="lesson-mode" value="progressive" checked>
                        <label for="mode-progressive">段階的練習（スペル全表示→徐々に隠す→全隠し）</label>
                    </div>
                    <div class="mode-option">
                        <input type="radio" id="mode-pronunciation-meaning" name="lesson-mode" value="pronunciation-meaning">
                        <label for="mode-pronunciation-meaning">発音 + 意味を表示してスペルを入力</label>
                    </div>
                    <div class="mode-option">
                        <input type="radio" id="mode-pronunciation-only" name="lesson-mode" value="pronunciation-only">
                        <label for="mode-pronunciation-only">発音のみを表示してスペルを入力</label>
                    </div>
                </div>
                
                <div class="custom-lesson-buttons btn-group">
                    <button class="btn btn-warning save-lesson-btn" onclick="saveNewLesson()">レッスンとして保存</button>
                    <button class="btn btn-primary start-custom-btn" onclick="startCustomLesson()">すぐにスタート</button>
                    <button class="btn btn-secondary cancel-custom-btn" onclick="cancelCustomLesson()">キャンセル</button>
                </div>
            </div>

            <div class="score-display" id="score-display"></div>
            
            <div class="keyboard-display-container">
                <div class="keyboard-display">
                    <div class="keyboard-row number-row">
                        <div class="key" data-key="1">1<span class="shift-char">!</span></div>
                        <div class="key" data-key="2">2</div>
                        <div class="key" data-key="3">3</div>
                        <div class="key" data-key="4">4</div>
                        <div class="key" data-key="5">5</div>
                        <div class="key" data-key="6">6</div>
                        <div class="key" data-key="7">7<span class="shift-char">'</span></div>
                        <div class="key" data-key="8">8</div>
                        <div class="key" data-key="9">9</div>
                        <div class="key" data-key="0">0</div>
                        <div class="key" data-key="-">-</div>
                    </div>
                    <div class="keyboard-row">
                        <div class="key" data-key="q">Q</div>
                        <div class="key" data-key="w">W</div>
                        <div class="key" data-key="e">E</div>
                        <div class="key" data-key="r">R</div>
                        <div class="key" data-key="t">T</div>
                        <div class="key" data-key="y">Y</div>
                        <div class="key" data-key="u">U</div>
                        <div class="key" data-key="i">I</div>
                        <div class="key" data-key="o">O</div>
                        <div class="key" data-key="p">P</div>
                    </div>
                    <div class="keyboard-row second-row">
                        <div class="key" data-key="a">A</div>
                        <div class="key" data-key="s">S</div>
                        <div class="key" data-key="d">D</div>
                        <div class="key" data-key="f">F</div>
                        <div class="key" data-key="g">G</div>
                        <div class="key" data-key="h">H</div>
                        <div class="key" data-key="j">J</div>
                        <div class="key" data-key="k">K</div>
                        <div class="key" data-key="l">L</div>
                    </div>
                    <div class="keyboard-row third-row">
                        <div class="key shift-key" data-key="shift">Shift</div>
                        <div class="key" data-key="z">Z</div>
                        <div class="key" data-key="x">X</div>
                        <div class="key" data-key="c">C</div>
                        <div class="key" data-key="v">V</div>
                        <div class="key" data-key="b">B</div>
                        <div class="key" data-key="n">N</div>
                        <div class="key" data-key="m">M</div>
                        <div class="key" data-key=",">,</div>
                        <div class="key" data-key=".">.</div>
                        <div class="key" data-key="/">/<span class="shift-char">?</span></div>
                    </div>
                    <div class="keyboard-row">
                        <div class="key space-key" data-key=" ">Space</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="records-sidebar">
            <h2>レッスン</h2>
            
            <!-- 動的に生成されるレベル記録がここに入ります -->
            
            <button onclick="clearRecords()" class="clear-records-btn">記録をクリア</button>
        </div>
    </div>

    <script src="level-lists.js"></script>
    <script src="script.js"></script>
</body>
</html>
